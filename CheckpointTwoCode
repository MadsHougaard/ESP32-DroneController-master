//Originally written in the Arduino standalone application

#include <MPU6050_tockn.h>
#include <Wire.h>

MPU6050 mpu6050(Wire);

const int LED = 4; //sets pin 4 as the LED pin


void setup() {

  Serial.begin(9600);
  Wire.begin();
  mpu6050.begin(); //initiates the accelerometer
  mpu6050.calcGyroOffsets(true); //initiates the calculation of offsets

  pinMode(LED, OUTPUT);       //defines pin 4 as the LED output pin

  randomSeed(analogRead(0));
}


void loop() {

//Accellerometer code//
  mpu6050.update(); //update results from accelerometer
  delay(50); //delay for stability
  
  //prints sensory values
  Serial.print("angleX : ");
  Serial.print(mpu6050.getAngleX());
  Serial.print("\tangleY : ");
  Serial.print(mpu6050.getAngleY());
  Serial.print("\tangleZ : ");
  Serial.println(mpu6050.getAngleZ());

//LED code//
  //if the y-angle, measured by the accelerometer, is between 3 and 4, the LED will do nothing
  if(mpu6050.getAngleY() > 3 && mpu6050.getAngleY() < 4){
    
    digitalWrite(4, LOW);
    //delay(75); //delay for stability
    
    
  //if the y-angle, measured by the accelerometer, is less than 3 or greater than 4, the LED will blink
  } else if (mpu6050.getAngleY() < 3 | mpu6050.getAngleY() > 4.5) {
    
    digitalWrite(4, HIGH); //pin 4 is set to 3.3 volts
    delay(100);

    digitalWrite(4, LOW); // pin 4 is set to 0 volts
    delay(50);
}

}
